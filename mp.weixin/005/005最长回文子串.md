# 最长回文子串
##  首先看下题目
![](https://gitee.com/mobilecoder/mdnice/raw/master/2020-8-26/1598450500018-image.png)

要解这一题，首先要弄明白题目的意思，上图中标出了3点，理出这三点，也就解除了这道题，下面给出思路：
1. 子串：串中任意个连续的字符组成的子序列称为该串的子串，看到这个定义我们可以知道用两个循环可以找出给定字符串的所有子串
2. 回文：也叫回环，是正读反读都能读通的句子，例如：**李总理**，**aba**，我们也能想到用两个指针，从两边往中间遍历，如果到最后每个都相等，那就说明当前字符串是回文
3. 计算所有子串里面最长的一个：每次循环遇到回文的时候，记录当前回文传，并且与上一次的回文串比较，循环结束即可得到最长的子串

### 暴力解法代码
```java
public static String longestPalindrome(String s) {
    String result = "";
    int max = 0;
    int len = s.length();
    // 两重循环求所有子串，这里复杂度是O(n^2)
    for (int i = 0; i < len; i++) {
        for (int j = i + 1; j <= len; j++) {
            String sub = s.substring(i, j);
            // 找出最长的回文子串 这里复杂度是O(n)
            if (isPalindromic(sub) && sub.length() > max) {
                result = s.substring(i, j);
                max = Math.max(max, result.length());
            }
        }
    }
    return result;
}

// 计算当前子串是不是回文串
public static boolean isPalindromic(String s) {
    int len = s.length();
    // 这里奇偶都一样
    for (int i = 0; i < len / 2; i++) {
        // 左右指针，从两边往中间依次遍历，判断是否相等
        if (s.charAt(i) != s.charAt(len - i - 1)) {
            return false;
        }
    }
    return true;
}
```
上面是暴力解法，思路比较清晰，但是时间复杂度比较高，需要`O(N^3)`，优秀的我们肯定不满足于这么耗时的操作，要想办法找到优化方法

### 优化解法
**中心扩散法**：这个解法我是没想到的，看题题解之后才想到，确实精妙。

上面我们使用的回文特性是：从两边到中间遍历每个字符都是相同的，其实中从中间到两边遍历，只要每个字符相等，它也是回文，这样的话只需要对字符串进行一重的for循环就行了，内层直接判断是否回文，这样两重循环可以解决。但是要**注意**奇偶的问题。

![](https://gitee.com/mobilecoder/mdnice/raw/master/2020-8-26/1598454365911-image.png)


![](https://gitee.com/mobilecoder/mdnice/raw/master/2020-8-26/1598454378035-image.png)

### 给出代码
```java
public static String longestPalindromeOpt(String s) {
    if (s == null || s.length() < 1) return "";
    int start = 0, end = 0;
    for (int i = 0; i < s.length(); i++) {
        int len1 = isPalindromicOpt(s, i, i);// 对奇数位判断
        int len2 = isPalindromicOpt(s, i, i + 1);// 对偶数位判断
        int len = Math.max(len1, len2);// 去他们之间最大的
        if (len > end - start) {// 
            start = i - (len - 1) / 2;
            end = i + len / 2;
        }
    }
    return s.substring(start, end + 1);
}

private static int isPalindromicOpt(String s, int left, int right) {
    int L = left, R = right;
    while (L >= 0 && R < s.length() && s.charAt(L) == s.charAt(R)) {
        L--;
        R++;
    }
    return R - L - 1;
}
```
代码参考(https://leetcode-cn.com/problems/longest-palindromic-substring/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-bao-gu/)

## 题外话
后面的更新可能不会定期了，因为我感觉回到家后做题并且写出来在公众上上面，还是比较花时间的，其实我一开始想维护公众号，是想坚持一件事，现在我们成立了一个早起协会，这也会是我坚持的事情，初步想法是争取每天（如果没有特殊的事情的话）早起，并且去健身，健身的过程会在西瓜或者抖音上直播，公众号也会去写，但是可能会是每周的总结，也会有LeetCode题解，但是可能是每周总结+flutter相关的东西居多。

